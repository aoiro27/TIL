# Claudeに「考えさせる」Chain of Thought（CoT）プロンプトの使い方（要約・翻訳）

## 概要

- 複雑なタスク（リサーチ、分析、問題解決など）では、Claudeに「考える余地」を与えることで出力の精度が大きく向上します。
- これを「Chain of Thought（CoT）プロンプティング」と呼び、Claudeに「ステップバイステップで考えて」と指示することで、より正確で深い応答が得られます。

---

## なぜ「考えさせる」のか？

- **精度向上**：問題を分解して考えさせることで、特に数学・論理・分析系タスクのミスが減る
- **一貫性・構造化**：思考の流れが明示されることで、まとまりのある出力になる
- **デバッグしやすい**：Claudeの思考過程が見えるので、どこで誤解が生じているか特定しやすい

---

## 逆に、CoTを使わない方が良い場合

- 出力が長くなり、レイテンシ（応答速度）が下がる
- 単純なタスクやスピード重視の場面では不要

---

## どんなタスクで有効？

- 人間でも「考えながら」解くようなタスク
  - 複雑な計算
  - 多段階の分析
  - 複数要素の意思決定
  - 論理的な文章作成

---

## CoTプロンプトの書き方（シンプル→高度）

1. **基本形**  
   - 「Think step-by-step（ステップバイステップで考えて）」と書くだけ
   - 例：  
     ```
     Think step-by-step before you write the answer.
     ```

2. **ガイド付き**  
   - 具体的な思考手順を箇条書きで指示
   - 例：  
     ```
     1. 顧客の過去の寄付履歴を分析
     2. 関心がありそうなプログラム要素を抽出
     3. その分析をもとにメール本文を作成
     ```

3. **構造化（XMLタグ活用）**  
   - `<thinking>`や`<answer>`などのタグで思考と最終回答を分離
   - 例：  
     ```
     <thinking>
     1. ...（思考過程を記述）
     </thinking>
     <answer>
     ...（最終回答）
     </answer>
     ```

---

## 例：ファイナンシャルアドバイス

### CoTなし
- いきなり「B案（債券）が良い」と結論だけ述べる。計算やリスク分析が浅い。

### CoTあり
- 1. 目標・期間を整理
- 2. 各選択肢のリターンを計算
- 3. リスク・過去の市場変動も考慮
- 4. 最終的な推奨理由を明示
- 例：
  ```
  <thinking>
  1. 目標：5年後の頭金
  2. A案（株）：12%リターンだが変動大
  3. B案（債券）：6%確定
  4. 5年後の金額を計算し、リスクも比較
  5. 重要な資金なのでリスク回避